<!DOCTYPE html>
<html>
  <head>
    <title>Shop Heroes Team Builder</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="Description" content=""/>
    <link type="text/css" rel="stylesheet" href="lib/firebase/google-firebase-ui-3.0.0.min.css" />
    <link type="text/css" rel="stylesheet" href="lib/jquery/jquery-ui-1.2.1.min.css"/>
    <link type="text/css" rel="stylesheet" href="lib/select2/select2.min.css"/>
    <link type="text/css" rel="stylesheet" href="css/tabs.css"/>
    <link type="text/css" rel="stylesheet" href="css/icons.css"/>
    <link type="text/css" rel="stylesheet" href="css/tooltip.css"/>
    <link type="text/css" rel="stylesheet" href="css/sh.css"/>
    <script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id=UA-107341279-1"></script>
    <script type="text/javascript" defer src="lib/firebase/google-firebase-5.0.4-app.min.js"></script>
    <script type="text/javascript" defer src="lib/firebase/google-firebase-5.0.4-auth.min.js"></script>
    <script type="text/javascript" defer src="lib/firebase/google-firebase-5.0.4-firestore.min.js"></script>
    <script type="text/javascript" defer src="lib/firebase/google-firebase-ui-3.0.0.min.js"></script>
    <script type="text/javascript" defer src="lib/jquery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" defer src="lib/select2/select2.min.js"></script>
    <script type="text/javascript" defer src="lib/vue/vue.js"></script>
    <script type="text/javascript" defer src="lib/jquery-loading-overlay.min.js"></script>
    <script type="text/javascript" defer src="js/prototypes.js?v=2.8.0"></script>
    <script type="text/javascript" defer src="js/components.js?v=2.8.0"></script>
    <script type="text/javascript" defer src="js/main.js?v=2.8.0"></script>
  </head>
  <body>
    <div id="app">
      <template>
        <div class="header">
          <div class="header-title">
            <div style="display: inline-block;">
              Welcome to <a href="https://shopheroes.com">Shop Heroes</a> Tools, <span v-html="userName">player</span>!
            </div>
            <div class="float-right">
              <button 
                v-if="firebase.isLogged"
                @click="signOut">Log Out</button>
              <button 
                v-else
                @click="signIn">Log In</button>
            </div>
            <div id="firebaseui-auth-container"
              v-show="firebase.isAuth">
            </div>
          </div>
        </div>
        <div class="content">
        <tabs>
          <tab name="Help">
            <div>
              <h2>Credits</h2>
              <p>The main idea of this site is to provide functionality for building team setups.</p>
              <p>I want to thank all those people created and maintaining <a href="http://bit.ly/shopheroes" target="_blank">Shop Heroes Spreadsheet</a> for this is an incredible source of ingame data!</p>
              <p>And I give my due respects to creators of Team Builder Redux for inspiring me to make this site.</p>
              
              <h2>Disclaimer</h2>
              <p>I developed this site to use it in offline mode, it uses Google.Firestore for authentication and data storage.</p>
              <p>You can't get and thus share links on your setups, but you can share stored data between different media if you dare to register on a noname site.</p>
              <p>This page is pure HTML and Javascript and most browsers cache files with initial content. If you see something is broken or missing - just force refresh browser with CTRL+F5. If the problem persists - email me.</p>
              <p>This site is best used with <a href="https://www.google.com/chrome/browser/desktop/index.html" target="_blank">Google Chrome</a> and <a href="https://www.mozilla.org/ru/firefox/new/" target="_blank">Mozilla Firefox</a>.
              <p>This site can not be used with any version of <a href="page::void" target="_blank">Internet Explorer</a> nor <a href="page::void" target="_blank">Microsoft Edge</a>. Not until they make their code compatible with ES standards and jQuery.</p>
              
              <h2><a href="#origins">Origins</a></h2>
              <p>Mark buildings boosts enabled/disabled.</p>
              <p>Adjust buildings levels (no functionality implemented).</p>
              <p>Adjust crown jewels upgrades levels according to your city for correct heroes power calculations.</p>

              <h2><a href="#items">Items</a></h2>
              <p>Blueprints with skills have checkboxes you can mark as mastered, so the skill will be applied to eqipped items.</p>
              <p>You can filter all BPs with skills with filter options "Contains non-blanks".</p>
              <p>Warning, you'll have to checkmark over hundred blueprints... I did it many times while developing this site.</p>

              <h2><a href="#heroes">Heroes</a></h2>
              <p>Adjust heroes levels and default gear you can apply to them after adding heroes to the team roster.</p>
              <p>Expand hero for the exact info on skills, items and items skills applied to hero, as well as detailed info on items powers, break chances etc.</p>
              <p>Collapsed profile shows summarized skills applied to a hero.</p>

              <h2><a href="#teams">Teams</a></h2>
              <p>Looks mostly same as Heroes tab, has the same functionality, but with few changes.</p>
              <p>When you add a hero to the roster it comes with no gear, then there's a button to copy default equipment.</p>
              <p>You can choose quest and details with be added on how team and heroes will handle it.</p>
              <p>Collapsed view shows summarized info on skills applied to whole team (i.e. Revival/Healer) while expanded view will show summarized info of individual hero.</p>
              
              <h2>Afterwords</h2>
              <p>You can help improving site's functionality! Send me email with your feedback to <a href="mailto:zarusjamer@gmail.com?subject=Shop Heroes Team Builder">zarusjamer@gmail.com</a>.</p>
              <p>You can also contribute code and designs at <a href="https://github.com/zarusjamer/sh">Git Hub</a> project page.</p>
              <h2>Have fun in the game!</h2>
            </div>
          </tab>
          <tab name="Teams">
            <div>
              <table class="shopheroes team filter">
                <thead>
                  <tr class="split">
                    <th class="hero-icon"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                  </tr>
                  <tr class="data-info">
                    <th rowspan="2">
                      <span
                        class="clickable ui-icon ui-icon-plus"
                        @click="addTeam"/>
                    </th>
                    <th colspan="2">
                      <span class="head">Name</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Quest</span>
                    </th>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                  <tr class="data-info">
                    <td colspan="2">
                      <input type="search" placeholder="Type in name" class="name" v-model="teams.filters.name"/>
                    </td>
                    <td colspan="2">
                      <select2
                        v-model="data.quest.name"
                        :options="$root.lists.quest"
                        placeholder="Choose quest"/>
                    </td>
                    <td colspan="2">
                      <template v-if="data.quest.name">
                        <span class="htooltip">
                          <span class="htooltip-text">{{'Set boss fight {0}'.format( data.quest.b ? 'disabled' : 'enabled' )}}</span>
                          <input v-model="data.quest.b" type="checkbox"/>
                        </span>
                        <span class="htooltip">
                          <span class="htooltip-text">{{'Set collective boost {0}'.format( data.quest.c ? 'disabled' : 'enabled' )}}</span>
                          <input v-model="data.quest.c" type="checkbox"/>
                        </span>
                        <span class="htooltip">
                          <span class="htooltip-text">{{'Set max instant boost {0}'.format( data.quest.i ? 'disabled' : 'enabled' )}}</span>
                          <input v-model="data.quest.i" type="checkbox"/>
                        </span>
                      </template>
                    </td>
                    <td colspan="2"/>
                    <td colspan="2"/>
                    <td colspan="2"/>
                    <td colspan="2"/>
                  </tr>
                </thead>
                <template v-for="object in data.teams">
                  <tr class="split">
                    <th/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                  <team :object="object"/>
                </template>
                <tfoot>
                  <tr class="split">
                    <th/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                </tfoot>
              </table>
            </div>
          </tab>
          <tab name="Heroes">
            <div>
              <table class="shopheroes hero filter">
                <thead>
                  <tr class="split">
                    <th class="hero-icon"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                    <th colspan="2" class="hero-slot"/>
                  </tr>
                  <tr class="data-info">
                    <th rowspan="2"/>
                    <th colspan="2">
                      <span class="head">Name</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Skill</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Level</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Type</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Tier</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Sex</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Origin</span>
                    </th>
                  </tr>
                  <tr class="data-info">
                    <td colspan="2">
                      <input v-model="heroes.filters.name" type="search" placeholder="Type in name" class="name"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose skill"
                        v-model="heroes.filters.skill"
                        :options="$root.lists.skill"/>
                    </td>
                    <td colspan="2">
                      <input v-model.number="heroes.filters.lv.min" type="number" class="lv"/>
                      <span>&nbsp;-&nbsp</span>
                      <input v-model.number="heroes.filters.lv.max" type="number" class="lv"/>
                    </td>
                    <td colspan="2">
                      <select2 v-model="heroes.filters.type" :options="heroes.lists.type" placeholder="Choose type" :nosearch="true"/>
                    </td>
                    <td colspan="2">
                      <select2 v-model="heroes.filters.tier" :options="heroes.lists.tier" placeholder="Choose tier" :nosearch="true"/>
                    </td>
                    <td colspan="2">
                      <select2 v-model="heroes.filters.sex" :options="heroes.lists.sex" placeholder="Choose sex" :nosearch="true"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose origin"
                        v-model="heroes.filters.origin"
                        :options="$root.lists.origin"/>
                    </td>
                  </tr>
                </thead>
                <template v-for="( object, name ) in visible.heroes">
                  <tr class="split">
                    <th/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                  <hero :object="object"/>
                </template>
                <tfoot>
                  <tr class="split">
                    <th/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                </tfoot>
              </table>
            </div>
          </tab>
          <tab name="Items">
            <div>
              <table class="shopheroes item">
                <thead>
                  <tr class="split">
                    <th class="name" colspan="2"/>
                    <th class="type"/>
                    <th class="level"/>
                    <th class="power"/>
                    <th class="skill" colspan="2"/>
                  </tr>
                  <tr class="data-info">
                    <th colspan="2">
                      <span class="head">Name</span>
                    </th>
                    <th>
                      <span class="head">Type</span>
                    </th>
                    <th>
                      <span class="head">Level</span>
                    </th>
                    <th>
                      <span class="head">Power</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Precrafts</span>
                    </th>
                  </tr>
                  <tr class="data-info">
                    <td colspan="2">
                      <input v-model="items.filters.name" type="search" placeholder="Type in name" class="name"/>
                    </td>
                    <td>
                      <select2 placeholder="Choose type"
                        v-model="items.filters.type"
                        :options="items.lists.type"/>
                    </td>
                    <td>
                      <input v-model.number="items.filters.lv.min" type="number" class="lv"/>
                      <span>&nbsp;-&nbsp;</span>
                      <input v-model.number="items.filters.lv.max" type="number" class="lv"/>
                    </td>
                    <td>
                    </td>
                    <td>
                      <input v-model="items.filters.pre.name" type="search" placeholder="Type in name" class="name"/>
                    </td>
                    <td>
                      <select2 placeholder="Choose quality"
                        v-model="items.filters.pre.q"
                        :options="$root.lists.quality"/>
                    </td>
                  </tr>
                  <tr class="data-info">
                    <th colspan="2">
                      <span class="head">Origin</span>
                    </th>
                    <th>
                      <span class="head">Rarity</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Skill</span>
                    </th>
                    <th colspan="2">
                      <span class="head"></span>
                    </th>
                  </tr>
                  <tr class="data-info">
                    <td colspan="2">
                      <select2 placeholder="Choose origin"
                        v-model="items.filters.origin"
                        :options="items.lists.origin"/>
                    </td>
                    <td>
                      <select2 placeholder="Choose rarity"
                        v-model="items.filters.rarity"
                        :options="$root.lists.rarity"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose skill"
                        v-model="items.filters.skill"
                        :options="$root.lists.skill"/>
                    </td>
                    <td colspan="2">
                    </td>
                  </tr>
                </thead>
                <template v-for="( object, name ) in visible.items">
                  <tr class="split">
                    <th colspan="2"/>
                    <th/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                  <item :object="object"/>
                </template>
                <tfoot>
                  <tr class="split">
                    <th colspan="2"/>
                    <th/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                </tfoot>
              </table>
            </div>
          </tab>
          <tab name="Origins">
            <div>
              <table class="shopheroes origin">
                <thead>
                  <tr class="split">
                    <th class="slot"/>
                    <th class="name"/>
                    <th class="type"/>
                    <th class="level"/>
                    <th class="level"/>
                  </tr>
                  <tr class="data-info">
                    <th/>
                    <th>
                      <span class="head">Name</span>
                    </th>
                    <th>
                      <span class="head">Type</span>
                    </th>
                    <th>
                      <span class="head">Level</span>
                    </th>
                    <th>
                      <span class="head">CJ Upgrades</span>
                    </th>
                  </tr>
                  <tr class="data-info">
                    <th/>
                    <td>
                      <input
                        v-model="origins.filters.name"
                        class="name"
                        type="search"
                        placeholder="Type in name"/>
                    </td>
                    <td>
                      <select2 placeholder="Choose type"
                        v-model="origins.filters.type"
                        :options="origins.lists.type"/>
                    </td>
                    <td/>
                    <td/>
                  </tr>
                  <tr class="split">
                    <th/>
                    <th/>
                    <th/>
                    <th/>
                    <th/>
                  </tr>
                </thead>
                <tbody>
                  <template v-for="( object, name ) in visible.origins">
                    <origin :object="object"/>
                  </template>
                </tbody>
                <tfoot>
                  <tr class="split">
                    <th/>
                    <th/>
                    <th/>
                    <th/>
                    <th/>
                  </tr>
                </tfoot>
              </table>
            </div>
          </tab>
          <tab name="Quests">
            <div>
              <table class="shopheroes quest filter">
                <thead>
                  <tr class="split">
                    <th class="name" colspan="3"/>
                    <th class="item" colspan="2"/>
                    <th class="item" colspan="2"/>
                    <th class="item" colspan="2"/>
                    <th class="item" colspan="2"/>
                    <th class="item" colspan="2"/>
                    <th class="item" colspan="2"/>
                  </tr>
                  <tr class="data-info">
                    <th colspan="3">
                      <span class="head">Name</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Item</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Origin</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Bag Type</span>
                    </th>
                    <th colspan="2">
                      <span class="head">Chest Type</span>
                    </th>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                  <tr class="data-info">
                    <td colspan="3">
                      <input type="search" placeholder="Type in name" class="name" v-model="quests.filters.name"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose item"
                        v-model="quests.filters.item"
                        :options="quests.lists.item"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose origin"
                        v-model="quests.filters.origin"
                        :options="quests.lists.origin"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose bag type"
                        v-model="quests.filters.bag"
                        :options="quests.lists.bag"/>
                    </td>
                    <td colspan="2">
                      <select2 placeholder="Choose chest type"
                        v-model="quests.filters.chest"
                        :options="quests.lists.chest"/>
                    </td>
                    <td colspan="2"/>
                    <td colspan="2"/>
                  </tr>
                </thead>
                <template v-for="( object, name ) in visible.quests">
                  <tr class="split">
                    <th colspan="3"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                  <tr class="data-info">
                    <th rowspan="2">
                      <span class="icon medium quest"
                        :class="[ icon( object.name ) ]"/>
                    </th>
                    <th>
                      <div>
                        <span class="head">{{object.name}}</span>
                      </div>
                    </th>
                    <td>
                      <timer :time="object.time"/>
                    </td>
                    <template v-for="tier in object.tiers">
                    <th colspan="2">
                      <span class="head">{{tier.name}}</span>
                    </th>
                    </template>
                  </tr>
                  <tr class="data-info">
                    <td>
                      <span>{{object.origin}}</span>
                    </td>
                    <th>
                      <span class="head">Total / Group</span>
                    </th>
                    <template v-for="tier in object.tiers">
                      <td>
                        <power :power="{ value: tier.power || object.power }" class="float-left"/>
                      </td>
                      <td/>
                    </template>
                  </tr>
                  <tr class="data-info">
                    <th>
                      <span class="icon item chest"
                        :class="icon( object.chest )"
                        v-if="object.chest"/>
                    </th>
                    <td>
                      <span v-if="object.chest">{{object.chest}}</span>
                    </td>
                    <th>
                      <div>
                        <span class="head">Base / Hero</span>
                      </div>
                    </th>
                    <template v-for="tier in object.tiers">
                      <td>
                        <power v-if="tier.base" :power="{ value: tier.base.power }" class="float-left"/>
                      </td>
                      <td>
                        <span v-if="tier.base" class="float-right">{{tier.base.xp.toLocaleString()}}</span>
                      </td>
                    </template>
                  </tr>
                  <tr class="data-info">
                    <th>
                      <span class="icon item bag"
                        :class="icon( object.bag )"
                        v-if="object.bag"/>
                    </th>
                    <td>
                      <span v-if="object.bag">{{object.bag}}</span>
                    </td>
                    <th>
                      <div>
                        <span class="head">Boss / Hero</span>
                      </div>
                    </th>
                    <template v-for="tier in object.tiers">
                      <td>
                        <power v-if="tier.boss" :power="{ value: tier.boss.power }" class="float-left"/>
                      </td>
                      <td>
                        <span v-if="tier.boss" class="float-right">{{tier.boss.xp.toLocaleString()}}</span>
                      </td>
                    </template>
                  </tr>
                  <tr class="data-info">
                    <th>
                      <span class="icon item"
                        :class="icon( object.item )"
                        v-if="object.item"/>
                    </th>
                    <td>
                      <span v-if="object.item">{{object.item}}</span>
                    </td>
                    <th>
                      <div>
                        <span class="head">Count</span>
                      </div>
                    </th>
                    <template v-for="tier in object.tiers">
                      <td>
                        <span v-if="tier.loot" class="float-right">{{tier.loot.min}}</span>
                      </td>
                      <td>
                        <span v-if="tier.loot" class="float-left">{{tier.loot.max}}</span>
                      </td>
                    </template>
                  </tr>
                </template>
                <tfoot>
                  <tr class="split">
                    <th colspan="3"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                    <th colspan="2"/>
                  </tr>
                </tfoot>
              </table>
            </div>
          </tab>
        </tabs>
        </div>
      </template>
    </div>
  </body>

  <script type="text/x-template" id="templates-origin">
    <tr class="data-info">
      <th>
        <template v-if="object.boostable">
          <input type="checkbox" v-model="object.b"/>
        </template>
      </th>
      <th>
        <span class="head">{{object.name}}</span>
      </th>
      <td>
        <span>{{object.type}}</span>
      </td>
      <td>
        <template v-if="object.lv">
          <div class="float-left">
            <span class="clickable ui-icon"
              :class="[ editLv ? 'ui-icon-check' : 'ui-icon-pencil' ]"
              @click="editLv = !editLv"/>
          </div>
          <span @dblclick="editLv = !editLv">
            <template v-if="editLv">
              <span class="clickable ui-icon ui-icon-arrowstop-1-s" @click="object.lv = 1"/>
              <input type="number" class="lv" v-model.number.lazy="object.lv"/>
              <span class="clickable ui-icon ui-icon-arrowstop-1-n" @click="object.lv = object.cap"/>
              <span class="float-right" @click="object.lv = object.cap">/&nbsp;{{object.cap}}</span>
            </template>
            <span v-else>{{object.lv}}</span>
          </span>
        </template>
      </td>
      <td>
        <template v-if="object.cj">
          <div class="float-left">
            <span class="clickable ui-icon"
              :class="[ editCj ? 'ui-icon-check' : 'ui-icon-pencil' ]"
              @click="editCj = !editCj"/>
          </div>
          <span @dblclick="editCj = !editCj">
            <template v-if="editCj">
              <span class="clickable ui-icon ui-icon-arrowstop-1-s" @click="object.cj.lv = 0"/>
              <input type="number" class="lv" v-model.number.lazy="object.cj.lv"/>
              <span class="clickable ui-icon ui-icon-arrowstop-1-n" @click="object.cj.lv = object.cj.cap"/>
              <span class="float-right" @click="object.cj.lv = object.cj.cap">/&nbsp;{{object.cj.cap}}</span>
            </template>
            <span v-else>{{object.cj.lv}}</span>
          </span>
        </template>
      </td>
    </tr>
  </script>
  
  <script type="text/x-template" id="templates-item">
    <tbody>
      <tr class="data-info">
        <th rowspan="2">
          <div>
            <span class="icon medium item"
              :class="icon( object.name )"/>
          </div>
        </th>
        <th>
          <span v-if="object.skill" class="float-left htooltip">
            <span class="htooltip-text">{{'Mark as {0}mastered'.format( object.skill.m ? 'not ' : '' )}}</span>
            <input type="checkbox" v-model="object.skill.m" />
          </span>
          <span class="head">{{object.name}}</span>
        </th>
        <td>
          <span class="float-left">
            <span class="icon type"
              :class="icon( object.type )"/>
          </span>
          <span>{{object.type}}</span>
        </td>
        <td>
          <span>{{object.lv}}</span>
        </td>
        <td>
          <power :power="{ value: object.power }"/>
        </td>
        <td class="left" rowspan="2" colspan="2">
          <div
            v-for="pi in object.pre"
            v-if="object.pre">
            <span>{{pi.c}}&nbsp;x&nbsp;</span>
            <span class="icon quality"
              :class="[ icon( pi.q ) ]" />
            <span class="icon item"
              :class="[ icon( pi.item ) ]" />
            <span>{{pi.item}}</span>
          </div>
        </td>
      </tr>
      <tr class="data-info">
        <td>
          <span>{{object.origin}}</span>
        </td>
        <td>
          <span>{{object.rarity}}</span>
        </td>
        <td colspan="2">
          <template v-if="object.skill">
            <span class="float-left icon quality"
              :class="icon( object.skill.q )" />
            <skill :skill="object.skill" />
          </template>
        </td>
      </tr>
    </tbody>
  </script>
  
  <script type="text/x-template" id="templates-hero">
    <tbody>
      <tr class="data-info">
        <th class="hero-icon" rowspan="2">
          <span class="icon medium hero"
            :class="icon( object.name )"/>
        </th>
        <th class="hero-icon"/>
        <th>
          <span class="head" :id="'heroes-' + object.name">{{object.name}}</span>
        </th>
        <td class="hero-icon">
          <template v-if="summary.origin.boostable">
            <span class="htooltip">
              <span class="htooltip-text">{{'Set {0} boost {1}'.format( object.origin, ( summary.origin.b ? 'disabled' : 'enabled' ) )}}</span>
              <input type="checkbox" v-model="summary.origin.b"/>
            </span>
          </template>
        </td>
        <td>
          <power :power="summary.power"/>
        </td>
        <td class="hero-icon">
          <span
            class="clickable ui-icon"
            :class="[ edits.lv ? 'ui-icon-check' : 'ui-icon-pencil' ]"
            @click="edits.lv = !edits.lv"/>
        </td>
        <td>
          <span @dblclick="edits.lv = !edits.lv">
            <template v-if="edits.lv">
              <span class="clickable ui-icon ui-icon-arrowstop-1-s" @click="object.lv = 1"/>
              <input type="number" class="lv" v-model.number.lazy="object.lv"/>
              <span class="clickable ui-icon ui-icon-arrowstop-1-n" @click="object.lv = object.cap"/>
              <span class="float-right">/&nbsp;{{object.cap}}</span>
            </template>
            <span v-else>{{object.lv}}</span>
          </span>
        </td>
        <td colspan="2">
          <span>{{object.type}}</span>
        </td>
        <td colspan="2">
          <span>Tier {{object.tier}}</span>
        </td>
        <td colspan="2">
          <span>{{object.sex}}</span>
        </td>
        <td colspan="2">
          <span>{{object.origin}}</span>
        </td>
      </tr>
      <tr class="data-info">
        <template v-for="j in 7">
          <template v-if="edits.expanded">
            <td class="hero-icon">
              <skillValue :skill="summary.skills.hero[j-1]"/>
            </td>
            <td>
              <skill :skill="summary.skills.hero[j-1]"/>
            </td>
          </template>
          <template v-else>
            <td class="hero-icon">
              <skillValue :skill="summary.info.hero[j-1]"/>
            </td>
            <td>
              <skill :skill="summary.info.hero[j-1]"/>
            </td>
          </template>
        </template>
      </tr>
      <template v-if="edits.expanded">
        <tr class="data-info">
          <th class="hero-icon">
            <span
              class="clickable ui-icon"
              :class="[ edits.expanded ? 'ui-icon-zoomout' : 'ui-icon-zoomin' ]"
              @click="edits.expanded = !edits.expanded"/>
            </span>
          </th>
          <template v-for="( slot, islot ) in object.slots">
            <th class="hero-icon">
              <span class="htooltip">
                <span class="htooltip-text">Change eqipment</span>
                <span
                  class="clickable ui-icon"
                  :class="[ edits.slots[islot] ? 'ui-icon-check' : 'ui-icon-pencil' ]"
                  @click="edits.slots[islot] = !edits.slots[islot]"/>
              </span>
            </th>
            <th>
              <itemSlot v-for="( a, type ) in slot.types" :type="type" :a="a" :key="type"/>
            </th>
          </template>
        </tr>
        <tr class="data-info">
          <th class="hero-icon" rowspan="4"/>
          <template v-for="( slot, islot ) in summary.slots">
            <template v-if="slot.item">
              <td colspan="2">
                <power :power="slot.power" class="float-left"/>
                <chance :chance="slot.chance" class="float-right"/>
              </td>
            </template>
            <template v-else>
              <td colspan="2"/>
            </template>
          </template>
        </tr>
        <tr class="data-info">
          <template v-for="( slot, islot ) in summary.slots">
            <template v-if="edits.slots[islot]">
              <td class="hero-icon">
                <span class="icon break"
                  v-if="slot.item"
                  :class="{ optimal: slot.optimal }"/>
              </td>
              <td>
                <select2 placeholder="Choose quality"
                  v-model="object.slots[islot].q"
                  :options="$root.lists.quality"/>
              </td>
            </template>
            <template v-else-if="slot.item">
              <td class="hero-icon">
                <span class="icon break" :class="{ optimal: slot.optimal }"/>
              </td>
              <td>
                <span class="float-left">
                  <span class="icon quality" :class="icon( slot.q )"/>
                </span>
                <span>{{slot.q}}</span>
              </td>
            </template>
            <template v-else>
              <td class="hero-icon"/>
              <td/>
            </template>
          </template>
        </tr>
        <tr class="data-info">
          <template v-for="( slot, islot ) in summary.slots">
            <template v-if="edits.slots[islot]">
              <td class="hero-icon">
                <span
                  v-if="slot.item">{{slot.item.lv}}</span>
              </td>
              <td>
                <select2
                  placeholder="Choose item"
                  v-model="object.slots[islot].item"
                  :options="slot.list"/>
              </td>
            </template>
            <template v-else-if="slot.item">
              <td class="hero-icon">
                <span>{{slot.item.lv}}</span>
              </td>
              <td>
                <span class="float-left">
                  <span class="icon item" :class="icon( slot.item.name )"/>
                </span>
                <span>{{slot.item.name}}</span>
              </td>
            </template>
            <template v-else>
              <td class="hero-icon"/>
              <td/>
            </template>
          </template>
        </tr>
        <tr class="data-info">
          <template v-for="( slot, islot ) in summary.slots">
            <template v-if="slot.item && slot.skill">
              <td class="hero-icon">
                <skillValue :skill="slot.skill"/>
              </td>
              <td>
                <skill :skill="slot.skill"/>
                <span v-if="edits.slots[islot]" class="float-right">
                  <input type="checkbox" v-model="slot.item.skill.m"/>
                </span>
              </td>
            </template>
            <template v-else>
              <td class="hero-icon"/>
              <td/>
            </template>
          </template>
        </tr>
      </template>
      <template v-else>
        <tr class="data-info">
          <th class="hero-icon">
            <span
              class="clickable ui-icon"
              :class="[ edits.expanded ? 'ui-icon-zoomout' : 'ui-icon-zoomin' ]"
              @click="edits.expanded = !edits.expanded"/>
            </span>
          </th>
          <template v-for="( slot, islot ) in summary.slots">
            <template v-if="slot.item">
              <td>
                <span class="icon quality" :class="icon( slot.q )"/>
              </td>
              <td>
                <span class="float-left">
                  <span class="icon item" :class="icon( slot.item.name )"/>
                </span>
                <span>{{slot.item.name}}</span>
              </td>
            </template>
            <template v-else>
              <td/>
              <td/>
            </template>
          </template>
        </tr>
      </template>
    </tbody>  
  </script>
  
  <script type="text/x-template" id="templates-team">
    <tbody>
      <tr class="data-info">
        <th class="hero-icon">
          <span
            class="clickable ui-icon ui-icon-trash"
            @click="remove( object )"/>
        </th>
        <th class="hero-icon">
          <span
            class="clickable ui-icon"
            :class="[ edits.name ? 'ui-icon-check' : 'ui-icon-pencil' ]"
            @click="edits.name = !edits.name"/>
        </th>
        <th>
          <input v-if="edits.name" v-model="object.name"/>
          <span v-else class="head">{{object.name}}</span>
        </th>
        <template v-for="( rst, sn ) in object.roster">
          <template v-if="companions[sn]">
            <td class="hero-icon">
              <span
                class="clickable ui-icon"
                :class="[ edits.roster[sn].hero ? 'ui-icon-check' : 'ui-icon-pencil' ]"
                @click="edits.roster[sn].hero = !edits.roster[sn].hero"/>
            </td>
            <td>
              <select2
                v-if="edits.roster[sn].hero"
                v-model="rst.name"
                :options="getHeroes( rst.name )"
                placeholder="Choose hero"/>
              <template v-else>
                <span class="float-left">
                  <span class="icon hero" :class="icon( rst.name )"/>
                </span>
                <span class="head">{{rst.name}}</span>
                <!--<span class="head"><a :href="'#heroes-' + rst.name">{{rst.name}}</a></span>-->
              </template>
            </td>
          </template>
          <template v-else>
            <td/>
            <td/>
          </template>
        </template>
      </tr>
      <tr class="data-info outline bottom">
        <th class="hero-icon">
          <span
            class="clickable ui-icon"
            :class="[ edits.expanded ? 'ui-icon-zoomout' : 'ui-icon-zoomin' ]"
            @click="edits.expanded = !edits.expanded"/>
        </th>
        <td class="hero-icon">
          <span>{{summary.assigned}}</span>
        </td>
        <td>
          <power :power="summary.power"/>
        </td>
        <template v-for="( rst, sn ) in object.roster">
          <template v-if="roster[sn]">
            <td class="hero-icon">
              <template v-if="roster[sn].origin.boostable">
                <span class="htooltip">
                  <span class="htooltip-text">{{'Set {0} boost {1}'.format( roster[sn].hero.origin, ( roster[sn].origin.b ? 'disabled' : 'enabled' ) )}}</span>
                  <input type="checkbox" v-model="roster[sn].origin.b"/>
                </span>
              </template>
            </td>
            <td>
              <power :power="roster[sn].power"/>
            </td>
          </template>
          <template v-else>
            <td class="hero-icon"/>
            <td/>
          </template>
        </template>
      </tr>
      <template v-if="quest">
        <tr class="data-info outline top">
          <th class="hero-icon" rowspan="3">
            <span class="head">Quest</span>
          </th>
          <td class="hero-icon">
            <!--<progress :max="quest.power.value" :value="summary.power.value"/>-->
            <!--<span class="icon hero face" :class="quest.power.face"/>-->
          </td>
          <td>
            <power :power="quest.power"/>
          </td>
          <template v-for="( rst, sn ) in object.roster">
            <template v-if="roster[sn]">
              <td class="hero-icon">
                <span class="icon hero face" :class="quest.roster[sn].injury.face"/>
              </td>
              <td>
                <span class="float-left">
                  <span class="icon timers injury"/>
                </span>
                <span>{{quest.roster[sn].time.heal.dateString()}}</span>
              </td>
            </template>
            <template v-else>
              <td class="hero-icon"/>
              <td/>
            </template>
          </template>
        </tr>
        <tr class="data-info">
          <td class="hero-icon">
          </td>
          <td>
            <timer :time="quest.time.value"/>
          </td>
          <template v-for="( rst, sn ) in object.roster">
            <template v-if="roster[sn]">
              <td class="hero-icon">
              </td>
              <td>
                <span class="float-left">
                  <span class="icon timers resting"/>
                </span>
                <span>{{quest.roster[sn].time.rest.dateString()}}</span>
              </td>
            </template>
            <template v-else>
              <td class="hero-icon"/>
              <td/>
            </template>
          </template>
        </tr>
        <tr class="data-info">
          <td class="hero-icon">
          </td>
          <td>
            <span class="float-left">
              <span class="icon item" :class="icon( quest.loot.item )"/>
            </span>
            <span>{{quest.loot.min}}&nbsp;-&nbsp;{{quest.loot.max}}</span> 
          </td>
          <template v-for="( rst, sn ) in object.roster">
            <template v-if="roster[sn]">
              <td class="hero-icon">
              </td>
              <td>
                <span class="float-left">
                  <span class="icon item" :class="icon( quest.loot.item )"/>
                </span>
                <span>{{quest.roster[sn].loot.min}}&nbsp;-&nbsp;{{quest.roster[sn].loot.max}}</span> 
              </td>
            </template>
            <template v-else>
              <td class="hero-icon"/>
              <td/>
            </template>
          </template>
        </tr>
      </template>
      <template v-if="summary.skills">
        <tr v-for="k in summary.skillsRows" class="data-info">
          <th class="hero-icon"
            v-if="k == 1"
            :rowspan="summary.skillsRows">
            <span class="head">Team</span>
          </th>
          <template v-for="j in 7">
            <template v-for="skill in [ summary.skills[7*(k-1)+j-1] ]">
              <td class="hero-icon">
                <skillValue :skill="skill" />
              </td>
              <td>
                <skill :skill="skill" />
              </td>
            </template>
          </template>
        </tr>
      </template>
      <template v-if="edits.expanded">
        <template v-for="( rst, sn ) in roster">
          <tr class="data-info">
            <th rowspan="2">
              <span class="icon medium hero" :class="icon( rst.hero.name )"/>
            </th>
            <th>
              <span>{{rst.hero.lv}}</span>
            </th>
            <th>
              <span class="head">{{rst.hero.name}}</span>
            </th>
            <template v-for="j in 6">
              <template v-for="skill in [ rst.info.hero[0+j-1] ]">
                <td>
                  <skillValue :skill="skill" />
                </td>
                <td>
                  <skill :skill="skill" />
                </td>
              </template>
            </template>
          </tr>
          <tr class="data-info">
            <td>
            </td>
            <td>
              <power :power="rst.power"/>
            </td>
            <template v-for="j in 6">
              <template v-for="skill in [ rst.info.hero[6+j-1] ]">
                <td>
                  <skillValue :skill="skill" />
                </td>
                <td>
                  <skill :skill="skill" />
                </td>
              </template>
            </template>
          </tr>
          <template v-if="edits.roster[sn].expanded">
            <tr class="data-info">
              <th>
                <span class="clickable ui-icon ui-icon-zoomout"
                  @click="edits.roster[sn].expanded = !edits.roster[sn].expanded"/>
              </th>
              <template v-for="( slot, islot ) in rst.slots">
                <th>
                  <span class="clickable ui-icon"
                    :class="edits.roster[sn].slots[islot] ? 'ui-icon-check' : 'ui-icon-pencil'"
                    @click="edits.roster[sn].slots[islot] = !edits.roster[sn].slots[islot]"/>
                  <span class="clickable ui-icon ui-icon-copy"
                    :class="slot.cloned ? 'hidden' : ''"
                    @click="cloneSlot( sn, islot )"/>
                </th>
                <th>
                  <itemSlot
                    v-for="( itemAffinity, itemType ) in rst.hero.slots[islot].types"
                    :type="itemType"
                    :a="itemAffinity"
                    :key="itemType"/>
                </th>
              </template>
            </tr>
            <tr class="data-info">
              <th class="hero-icon" rowspan="4"/>
              <template v-for="( slot, islot ) in rst.slots">
                <td colspan="2">
                  <template v-if="slot.item">
                    <power :power="slot.power" class="float-left"/>
                    <chance :chance="slot.chance" class="float-right"/>
                  </template>
                </td>
              </template>
            </tr>
            <tr class="data-info">
              <template v-for="( slot, islot ) in rst.slots">
                <td class="hero-icon">
                  <template v-if="slot.item">
                    <span class="icon break"
                      :class="{ optimal: slot.optimal }"/>
                  </template>
                </td>
                <td>
                  <template v-if="edits.roster[sn].slots[islot]">
                    <select2 placeholder="Choose quality"
                      v-model="object.roster[sn].slots[islot].q"
                      :options="$root.lists.quality"/>
                  </template>
                  <template v-else-if="slot.item">
                    <span class="float-left">
                      <span class="icon quality" :class="icon( slot.q )"/>
                    </span>
                    <span>{{slot.q}}</span>
                  </template>
                </td>
              </template>
            </tr>
            <tr class="data-info">
              <template v-for="( slot, islot ) in rst.slots">
                <td class="hero-icon">
                  <template v-if="slot.item">
                    <span>{{slot.item.lv}}</span>
                  </template>
                </td>
                <td>
                  <template v-if="edits.roster[sn].slots[islot]">
                    <select2 placeholder="Choose item"
                      v-model="object.roster[sn].slots[islot].item"
                      :options="slot.list"/>
                  </template>
                  <template v-else-if="slot.item">
                    <span class="float-left">
                      <span class="icon item" :class="icon( slot.item.name )"/>
                    </span>
                    <span>{{slot.item.name}}</span>
                  </template>
                </td>
              </template>
            </tr>
            <tr class="data-info">
              <template v-for="( slot, islot ) in rst.slots">
                <td>
                  <template v-if="slot.item && slot.item.skill">
                    <skillValue :skill="slot.skill"/>
                  </template>
                </td>
                <td>
                  <template v-if="slot.item && slot.item.skill">
                    <skill :skill="slot.skill"/>
                    <span v-if="edits.roster[sn].slots[islot]" class="float-right">
                      <input type="checkbox" v-model="slot.item.skill.m"/>
                    </span>
                  </template>
                </td>
              </template>
            </tr>
          </template>
          <template v-else>
            <tr class="data-info">
              <th class="hero-icon">
                <span class="clickable ui-icon ui-icon-zoomin"
                  @click="edits.roster[sn].expanded = !edits.roster[sn].expanded"/>
              </th>
              <template v-for="( slot, islot ) in rst.slots">
                <template v-if="slot.item">
                  <td>
                    <span class="icon quality" :class="icon( slot.q )"/>
                  </td>
                  <td>
                    <span class="float-left">
                      <span class="icon item" :class="icon( slot.item.name )"/>
                    </span>
                    <span>{{slot.item.name}}</span>
                  </td>
                </template>
                <template v-else>
                  <td/>
                  <td/>
                </template>
              </template>
            </tr>
          </template>
        </template>
      </template>
    </tbody>
  </script>
</html>