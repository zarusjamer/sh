<!DOCTYPE html>
<html>
  <head>
    <title>Shop Heroes Team Builder</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="Description" content=""/>
    <link rel="stylesheet" type="text/css" href="jquery/css/jquery-ui.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="select2/css/select2.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/tabs.css?v=2.8.0" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/sh.css?v=2.8.0" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/icons.css?v=2.8.0" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/tooltip.css?v=2.8.0" media="screen"/>
    <script type="text/javascript" src="jquery/js/jquery.min.js"></script>
    <script type="text/javascript" src="jquery/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="select2/js/select2.min.js"></script>
    <script type="text/javascript" src="vue/js/vue.js"></script>
    <script type="text/javascript" src="js/localforage.min.js?v=2.8.0"></script>
    <script type="text/javascript" src="js/prototypes.js?v=2.8.0"></script>
    <script type="text/javascript" src="js/components.js?v=2.8.0"></script>
    <script type="text/javascript" src="js/main.js?v=2.8.0"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107341279-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments)};
      gtag('js', new Date());
      gtag('config', 'UA-107341279-1');
    </script>
    -->
  </head>
  <body>
    <div id="app">
      <tabs>
        <tab name="Help">
          <div>
            <h2>Welcome, <a href="https://shopheroes.com">Shop Heroes</a> player!</h2>
            <p>The main idea of this site is to provide functionality for building team setups.</p>
            <p>I developed this site to use it in offline mode, it doesn't use server as backend, so you can't share links on setups, nor you can share your setups between different medias.</p>
            <p>Well, lies, you actually can share setups, that's why there's Data tab, but using it is tricky.</p>

            <h2>Credits</h2>
            <p>I want to thank all those people created and maintaining <a href="http://bit.ly/shopheroes" target="_blank">Shop Heroes Spreadsheet</a> for this is an incredible source of ingame data!</p>
            <p>And I give my due respects to creators of Team Builder Redux for inspiring me to make this site.</p>
            
            <h2>Disclaimer</h2>
            <p>Due to this page is pure HTML and Javascript browsers cache files with initial content, hence sometimes no changes applied upon loading page. If you see something is broken or missing - just force refresh browser with CTRL+F5.</p>
            <p>This site is best used with <a href="https://www.google.com/chrome/browser/desktop/index.html" target="_blank">Google Chrome</a> and <a href="https://www.mozilla.org/ru/firefox/new/" target="_blank">Mozilla Firefox</a>.
            <p>This site can not be used with any version of <a href="page::void" target="_blank">Internet Explorer</a> nor <a href="page::void" target="_blank">Microsoft Edge</a>. Not until they make their code compatible with ES standards and jQuery.</p>
            
            <h2>Basics</h2>
            <p>Adjust your heroes, items and city upgrades at appropriate tabs:
            <ul>
            <li>at <a href="#heroes">Heroes</a> tab you can adjust heroes levels;</li>
            <li>at <a href="#items">Items</a> tab you can adjust which items skills you have mastered. Mark them with checkbox;</li>
            <li>at <a href="#origins">Origins</a> tab mark owned buildings and packs and adjust buildings level and crown jewels upgrades level.</li>
            </ul>
            All those tables can be filtered many ways, so you can faster navigate to specific item/hero you need.
            </p>

            <h2><a href="#teams">Teams</a></h2>
            <p>Now you can proceed to <a href="#teams">Teams</a> tab and start your party assembling</p>
            <p>First add new team by clicking <i>plus</i> button.</p>
            <p>Now you can start edit it by clicking <i>pencil</i> button on the left of team name. Set the team name and add heroes to it's roster. Checkbox near hero power emulates bulding boost bonus.</p>
            
            <h2><a href="#data">Data</a></h2>
            <p>You can export and import custom data (ie changes info).</p>
            <p>Select an option and do what you want:
            <ul>
            <li>click <b>Clean</b> button to clear all changes made to base info but beware as this is unrecoverable operation;</li>
            <li>click <b>Get</b> button to get all changed data to a text area below - you can save it to a file for future use;</li>
            <li>place previously custom changes to text area and click <b>Set</b> button to load new custom data.</li>
            </ul>
            </p>
            
            <h2>Have fun in the game!</h2>
            <p>You can help developing site!</p>
            <p>Send me email with your feedback to <a href="mailto:zarusjamer@gmail.com?subject=Shop Heroes Team Builder">zarusjamer@gmail.com</a>.</p>
            <p>You can also contribute code and designs at <a href="https://github.com/zarusjamer/shopheroes">Git Hub</a> project page.</p>
          </div>
        </tab>
        <tab name="Teams">
          <div>
            <table class="shopheroes team filter">
              <thead>
                <tr class="split">
                  <th class="hero-icon"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                </tr>
                <tr class="data-info">
                  <th rowspan="2">
                    <span class="button add" @click="addTeam"/>
                  </th>
                  <th colspan="2">
                    <span class="head">Name</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Quest</span>
                  </th>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
                <tr class="data-info">
                  <td colspan="2">
                    <input type="search" placeholder="Type in name" class="name" v-model="teams.filters.name"/>
                  </td>
                  <td colspan="2">
                    <select2
                      v-model="teams.quest.choice"
                      :options="lists.quest"
                      placeholder="Choose quest"/>
                  </td>
                  <td colspan="2">
                    <template v-if="teams.quest.choice">
                      <span class="htooltip">
                        <span class="htooltip-text">{{'Set boss fight {0}'.format( teams.quest.boss ? 'disabled' : 'enabled' )}}</span>
                        <input v-model="teams.quest.boss" type="checkbox"/>
                      </span>
                      <span class="htooltip">
                        <span class="htooltip-text">{{'Set {1} collective boost {0}'.format( teams.quest.boost.c ? 'disabled' : 'enabled', summary.quest.origin )}}</span>
                        <input v-model="teams.quest.boost.c" type="checkbox"/>
                      </span>
                      <span class="htooltip">
                        <span class="htooltip-text">{{'Set {1} instant x3 boost {0}'.format( teams.quest.boost.i ? 'disabled' : 'enabled', summary.quest.origin )}}</span>
                        <input v-model="teams.quest.boost.i" type="checkbox"/>
                      </span>
                    </template>
                  </td>
                  <td colspan="2"/>
                  <td colspan="2"/>
                  <td colspan="2"/>
                  <td colspan="2"/>
                </tr>
              </thead>
              <template v-for="( object, name ) in data.teams">
                <tr class="split">
                  <th/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
                <team :object="object"/>
              </template>
              <tfoot>
                <tr class="split">
                  <th/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
              </tfoot>
            </table>
          </div>
        </tab>
        <tab name="Heroes">
          <div>
            <table class="shopheroes hero filter">
              <thead>
                <tr class="split">
                  <th class="hero-icon"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                  <th colspan="2" class="hero-slot"/>
                </tr>
                <tr class="data-info">
                  <th rowspan="2"/>
                  <th colspan="2">
                    <span class="head">Name</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Level</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Type</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Tier</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Sex</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Origin</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Skill</span>
                  </th>
                </tr>
                <tr class="data-info">
                  <td colspan="2">
                    <input v-model="heroes.filters.name" type="search" placeholder="Type in name" class="name"/>
                  </td>
                  <td colspan="2">
                    <input v-model.number="heroes.filters.lv.min" type="number" class="lv"/>
                    <span>&nbsp;-&nbsp</span>
                    <input v-model.number="heroes.filters.lv.max" type="number" class="lv"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="heroes.filters.type" :options="heroes.lists.type" placeholder="Choose type" :nosearch="true"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="heroes.filters.tier" :options="heroes.lists.tier" placeholder="Choose tier" :nosearch="true"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="heroes.filters.sex" :options="heroes.lists.sex" placeholder="Choose sex" :nosearch="true"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="heroes.filters.origin" :options="lists.origin" placeholder="Choose origin"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="heroes.filters.skill" :options="lists.skill" placeholder="Choose skill"/>
                  </td>
                </tr>
              </thead>
              <template v-for="( object, name ) in visible.heroes">
                <tr class="split">
                  <th/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
                <hero :object="object"/>
              </template>
              <tfoot>
                <tr class="split">
                  <th/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
              </tfoot>
            </table>
          </div>
        </tab>
        <tab name="Items">
          <div>
            <table class="shopheroes item">
              <thead>
                <tr class="split">
                  <th class="name" colspan="2"/>
                  <th class="type"/>
                  <th class="level"/>
                  <th class="power"/>
                  <th class="skill"/>
                </tr>
                <tr class="data-info">
                  <th colspan="2">
                    <span class="head">Name</span>
                  </th>
                  <th>
                    <span class="head">Type</span>
                    <!--
                    <span class="icon-sortable float-right" :class="[ sorts.type ]" @click="add_sort( $event, 'type' )">
                      <span class="top">&#9650;</span>
                      <span class="bot">&#9660;</span>
                    </span>
                    -->
                  </th>
                  <th>
                    <span class="head">Level</span>
                    <!--
                    <span class="icon-sortable float-right" :class="[ sorts.lv ]" @click="add_sort( $event, 'lv' )">
                      <span class="top">&#9650;</span>
                      <span class="bot">&#9660;</span>
                    </span>
                    -->
                  </th>
                  <th>
                    <span class="head">Power</span>
                  </th>
                  <th>
                    <span class="head">Skill</span>
                  </th>
                </tr>
                <tr class="data-info">
                  <td colspan="2">
                    <input v-model="items.filters.name" type="search" placeholder="Type in name" class="name"/>
                  </td>
                  <td>
                    <select2 v-model="items.filters.type" :options="items.lists.type" placeholder="Choose type"/>
                  </td>
                  <td>
                    <input v-model.number="items.filters.lv.min" type="number" class="lv"/>
                    <span>&nbsp;-&nbsp;</span>
                    <input v-model.number="items.filters.lv.max" type="number" class="lv"/>
                  </td>
                  <td>
                  </td>
                  <td>
                    <select2 v-model="items.filters.skill" :options="lists.skill" placeholder="Choose skill"/>
                  </td>
                </tr>
                <tr class="data-info">
                  <th colspan="2">
                    <span class="head">Origin</span>
                  </th>
                  <th>
                    <span class="head">Rarity</span>
                  </th>
                  <th>
                    <span class="head">XP</span>
                  </th>
                  <th>
                    <span class="head">Price</span>
                  </th>
                  <th>
                    <span class="head">Precrafts</span>
                  </th>
                </tr>
                <tr class="data-info">
                  <td colspan="2">
                    <select2 v-model="items.filters.origin" :options="items.lists.origin" placeholder="Choose origin"/>
                  </td>
                  <td>
                    <select2 v-model="items.filters.rarity" :options="lists.rarity" placeholder="Choose rarity"/>
                  </td>
                  <td>
                  </td>
                  <td>
                  </td>
                  <td>
                    <div style="width: 50% !important; display: inline-block;">
                      <input v-model="items.filters.pre.name" type="search" placeholder="Type in name" class="name"/>
                    </div>
                    <div style="width: 45% !important; display: inline-block;">
                      <select2 v-model="items.filters.pre.q" :options="lists.quality" placeholder="Choose quality"/>
                    </div>
                  </td>
                </tr>
              </thead>
              <template v-for="( object, name ) in visible.items">
                <tr class="split">
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                </tr>
                <item :object="object"/>
              </template>
              <tfoot>
                <tr class="split">
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                </tr>
              </tfoot>
            </table>
          </div>
        </tab>
        <tab name="Origins">
          <div>
            <table class="shopheroes origin">
              <thead>
                <tr class="split">
                  <th class="slot"/>
                  <th class="name"/>
                  <th class="type"/>
                  <th class="level"/>
                  <th class="level"/>
                </tr>
                <tr class="data-info">
                  <th/>
                  <th>
                    <span class="head">Name</span>
                  </th>
                  <th>
                    <span class="head">Type</span>
                  </th>
                  <th>
                    <span class="head">Level</span>
                  </th>
                  <th>
                    <span class="head">CJ Upgrades</span>
                  </th>
                </tr>
                <tr class="data-info">
                  <th/>
                  <td>
                    <input
                      v-model="origins.filters.name"
                      class="name"
                      type="search"
                      placeholder="Type in name"/>
                  </td>
                  <td>
                    <select2
                      v-model="origins.filters.type"
                      :options="origins.lists.type"
                      placeholder="Choose type"/>
                  </td>
                  <td/>
                  <td/>
                </tr>
                <tr class="split">
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                </tr>
              </thead>
              <tbody>
                <template v-for="( object, name ) in visible.origins">
                  <origin :object="object"/>
                </template>
              </tbody>
              <tfoot>
                <tr class="split">
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                  <th/>
                </tr>
              </tfoot>
            </table>
          </div>
        </tab>
        <tab name="Quests">
          <div>
            <table class="shopheroes quest filter">
              <thead>
                <tr class="split">
                  <th class="name" colspan="3"/>
                  <th class="item" colspan="2"/>
                  <th class="item" colspan="2"/>
                  <th class="item" colspan="2"/>
                  <th class="item" colspan="2"/>
                  <th class="item" colspan="2"/>
                  <th class="item" colspan="2"/>
                </tr>
                <tr class="data-info">
                  <th colspan="3">
                    <span class="head">Name</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Item</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Origin</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Bag Type</span>
                  </th>
                  <th colspan="2">
                    <span class="head">Chest Type</span>
                  </th>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
                <tr class="data-info">
                  <td colspan="3">
                    <input type="search" placeholder="Type in name" class="name" v-model="quests.filters.name"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="quests.filters.item" :options="quests.lists.item" placeholder="Choose item"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="quests.filters.origin" :options="quests.lists.origin" placeholder="Choose origin"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="quests.filters.bag" :options="quests.lists.bag" placeholder="Choose bag type"/>
                  </td>
                  <td colspan="2">
                    <select2 v-model="quests.filters.chest" :options="quests.lists.chest" placeholder="Choose chest type"/>
                  </td>
                  <td colspan="2"/>
                  <td colspan="2"/>
                </tr>
              </thead>
              <template v-for="( object, name ) in visible.quests">
                <tr class="split">
                  <th colspan="3"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
                <tr class="data-info">
                  <th rowspan="2">
                    <span class="icon medium quest" :class="[ icon( object.name ) ]"/>
                  </th>
                  <th>
                    <div>
                      <span class="head">{{object.name}}</span>
                    </div>
                  </th>
                  <td>
                    <timer :time="object.time"/>
                  </td>
                  <template v-for="tier in object.tiers">
                  <th colspan="2">
                    <span class="head">{{tier.name}}</span>
                  </th>
                  </template>
                </tr>
                <tr class="data-info">
                  <td>
                    <span>{{object.origin}}</span>
                  </td>
                  <th>
                    <span class="head">Total / Group</span>
                  </th>
                  <template v-for="tier in object.tiers">
                    <td>
                      <power :power="{ value: tier.power || object.power }" class="float-left"/>
                    </td>
                    <td/>
                  </template>
                </tr>
                <tr class="data-info">
                  <th>
                    <span v-if="object.chest" class="icon item chest" :class="icon( object.chest )"/>
                  </th>
                  <td>
                    <span v-if="object.chest">{{object.chest}}</span>
                  </td>
                  <th>
                    <div>
                      <span class="head">Base / Hero</span>
                    </div>
                  </th>
                  <template v-for="tier in object.tiers">
                    <td>
                      <power v-if="tier.base" :power="{ value: tier.base.power }" class="float-left"/>
                    </td>
                    <td>
                      <span v-if="tier.base" class="float-right">{{tier.base.xp.toLocaleString()}}</span>
                    </td>
                  </template>
                </tr>
                <tr class="data-info">
                  <th>
                    <span v-if="object.bag" class="icon item bag" :class="icon( object.bag )"/>
                  </th>
                  <td>
                    <span v-if="object.bag">{{object.bag}}</span>
                  </td>
                  <th>
                    <div>
                      <span class="head">Boss / Hero</span>
                    </div>
                  </th>
                  <template v-for="tier in object.tiers">
                    <td>
                      <power v-if="tier.boss" :power="{ value: tier.boss.power }" class="float-left"/>
                    </td>
                    <td>
                      <span v-if="tier.boss" class="float-right">{{tier.boss.xp.toLocaleString()}}</span>
                    </td>
                  </template>
                </tr>
                <tr class="data-info">
                  <th>
                    <span v-if="object.item" class="icon artifact" :class="icon( object.item )"/>
                  </th>
                  <td>
                    <span v-if="object.item">{{object.item}}</span>
                  </td>
                  <th>
                    <div>
                      <span class="head">Count</span>
                    </div>
                  </th>
                  <template v-for="tier in object.tiers">
                    <td>
                      <span v-if="tier.loot" class="float-right">{{tier.loot.min}}</span>
                    </td>
                    <td>
                      <span v-if="tier.loot" class="float-left">{{tier.loot.max}}</span>
                    </td>
                  </template>
                </tr>
              </template>
              <tfoot>
                <tr class="split">
                  <th colspan="3"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                  <th colspan="2"/>
                </tr>
              </tfoot>
            </table>
          </div>
        </tab>
        <tab name="Data">
          <div>
            <div>
              <select id="tabs-data-type">
                <option value="origins">Origins</option>
                <option value="items">Items</option>
                <option value="heroes">Heroes</option>
                <option value="teams">Teams</option>
              </select>
              <input id="tabs-data-clean" type="button" value="Clean"/>
              <input id="tabs-data-get" type="button" value="Get"/>
              <input id="tabs-data-set" type="button" value="Set"/>
            </div>
            <div>
              <textarea id="tabs-data-json"></textarea>
            </div>
          </div>
        </tab>
      </tabs>
    </div>
  </body>

  <script type="text/x-template" id="templates-origin">
    <tr class="data-info">
      <th>
        <template v-if="object.boostable">
          <input type="checkbox" v-model="object.b"/>
        </template>
      </th>
      <th>
        <span class="head">{{object.name}}</span>
      </th>
      <td>
        <span>{{object.type}}</span>
      </td>
      <td>
        <template v-if="object.lv">
          <div class="float-left">
            <span class="button" :class="[ editLv ? 'apply' : 'edit' ]" @click="editLv = !editLv"/>
          </div>
          <span @dblclick="editLv = !editLv">
            <template v-if="editLv">
              <span class="button ui-icon-arrowstop-1-s" @click="object.lv = 1"/>
              <input type="number" class="lv" v-model.number.lazy="object.lv"/>
              <span class="button ui-icon-arrowstop-1-n" @click="object.lv = object.cap"/>
              <span class="float-right" @click="object.lv = object.cap">/&nbsp;{{object.cap}}</span>
            </template>
            <span v-else>{{object.lv}}</span>
          </span>
        </template>
      </td>
      <td>
        <template v-if="object.cj">
          <div class="float-left">
            <span class="button" :class="[ editCj ? 'apply' : 'edit' ]" @click="editCj = !editCj"/>
          </div>
          <span @dblclick="editCj = !editCj">
            <template v-if="editCj">
              <span class="button ui-icon-arrowstop-1-s" @click="object.cj.lv = 0"/>
              <input type="number" class="lv" v-model.number.lazy="object.cj.lv"/>
              <span class="button ui-icon-arrowstop-1-n" @click="object.cj.lv = object.cj.cap"/>
              <span class="float-right" @click="object.cj.lv = object.cj.cap">/&nbsp;{{object.cj.cap}}</span>
            </template>
            <span v-else>{{object.cj.lv}}</span>
          </span>
        </template>
      </td>
    </tr>
  </script>
  
  <script type="text/x-template" id="templates-item">
    <tbody>
      <tr class="data-info">
        <th rowspan="2">
          <div>
            <span class="icon medium item" :class="[ icon( object.type ), 'i-' + icon( object.name ) ]"/>
          </div>
        </th>
        <th>
          <span v-if="object.skill" class="float-left htooltip">
            <span class="htooltip-text">{{'Mark as {0}mastered'.format( object.skill.m ? 'not ' : '' )}}</span>
            <input type="checkbox" v-model="object.skill.m" />
          </span>
          <span class="head">{{object.name}}</span>
        </th>
        <td>
          <span class="float-left icon item" :class="[ icon( object.type ) ]"/>
          <span>{{object.type}}</span>
        </td>
        <td>
          <span>{{object.lv}}</span>
        </td>
        <td>
          <power :power="{ value: object.power }"/>
        </td>
        <td>
          <template v-if="object.skill">
            <span class="float-left icon quality" :class="icon( object.skill.q )" />
            <skill :skill="object.skill" />
          </template>
        </td>
      </tr>
      <tr class="data-info">
        <td>
          <span>{{object.origin}}</span>
        </td>
        <td>
          <span>{{object.rarity}}</span>
        </td>
        <td>
          <span>{{object.xp.intString()}}</span>
        </td>
        <td>
          <span>{{object.price.intString()}}</span>
        </td>
        <td class="left">
          <template v-for="pi in object.pre" v-if="object.pre">
            <span class="icon quality" :class="[ icon( pi.q ) ]" />
            <span class="icon item" :class="[ 'i-' + icon( pi.item ) ]" />
            <span>{{"{0} {1}".format( pi.q, pi.item )}}</span>
          </template>
        </td>
      </tr>
    </tbody>
  </script>
  
  <script type="text/x-template" id="templates-hero">
    <tbody>
      <tr class="data-info">
        <th rowspan="2">
          <span class="icon medium hero" :class="icon( object.name )" @dblclick="editAll = !editAll"></span>
        </th>
        <th colspan="2">
          <span class="head">{{object.name}}</span>
        </th>
        <td>
          <span class="button" :class="[ edits.lv ? 'apply' : 'edit' ]" @click="edits.lv = !edits.lv"/>
        </td>
        <td>
          <span @dblclick="edits.lv = !edits.lv">
            <template v-if="edits.lv">
              <span class="button ui-icon-arrowstop-1-s" @click="object.lv = 1"/>
              <input type="number" class="lv" v-model.number.lazy="object.lv"/>
              <span class="button ui-icon-arrowstop-1-n" @click="object.lv = object.cap"/>
              <span class="float-right">/&nbsp;{{object.cap}}</span>
            </template>
            <span v-else>{{object.lv}}</span>
          </span>
        </td>
        <td colspan="2">
          <span>{{object.type}}</span>
        </td>
        <td colspan="2">
          <span>Tier {{object.tier}}</span>
        </td>
        <td colspan="2">
          <span>{{object.sex}}</span>
        </td>
        <td colspan="2">
          <span>{{object.origin}}</span>
        </td>
        <td colspan="2"/>
      </tr>
      <tr class="data-info">
        <td>
          <template v-if="summary.origin.boostable">
            <span class="htooltip">
              <span class="htooltip-text">{{'Set {0} boost {1}'.format( object.origin, ( summary.origin.b ? 'disabled' : 'enabled' ) )}}</span>
              <input type="checkbox" v-model="summary.origin.b"/>
            </span>
          </template>
        </td>
        <td>
          <power :power="summary.power" class="float-left"/>
        </td>
        <template v-for="skill in summary.skills.hero">
          <td>
            <skillValue :skill="skill"/>
          </td>
          <td>
            <skill :skill="skill"/>
          </td>
        </template>
        <td colspan="2"/>
        <td colspan="2"/>
        <td colspan="2"/>
      </tr>
      <tr class="data-info">
        <th>
          <span class="button" :class="[ editAll ? 'apply' : 'edit' ]" @click="editAll = !editAll"/>
        </th>
        <template v-for="( slot, type ) in object.slots">
          <th colspan="2">
            <itemSlot v-for="( a, type ) in slot.types" :type="type" :a="a" :key="type"/>
          </th>
        </template>
      </tr>
      <tr class="data-info">
        <th rowspan="4"/>
        <template v-for="( slot, type ) in summary.slots">
          <td>
            <span class="button" :class="[ edits[type] ? 'apply' : 'edit' ]" @click="edits[type] = !edits[type]"/>
          </td>
          <td>
            <power :power="slot.power" class="float-left"/>
            <chance :chance="slot.chance" class="float-right"/>
          </td>
        </template>
      </tr>
      <tr class="data-info">
        <template v-for="( slot, type ) in summary.slots">
          <td class="hero-icon">
            <span class="icon break" :class="{ optimal: slot.optimal }"/>
          </td>
          <td>
            <template v-if="edits[type]">
              <select2 v-model="object.slots[type].q" :options="$parent.lists.quality" placeholder="Choose quality"/>
            </template>
            <template v-else>
              <span class="float-left">
                <span class="icon quality" :class="icon( object.slots[type].q )"/>
              </span>
              <span>{{object.slots[type].q}}</span>
            </template>
          </td>
        </template>
      </tr>
      <tr class="data-info">
        <template v-for="( slot, type ) in summary.slots">
          <td class="hero-icon">
            <span v-if="slot.item">{{slot.item.lv}}</span>
          </td>
          <td>
            <template v-if="edits[type]">
              <select2 v-model="object.slots[type].item" :options="slot.list" placeholder="Choose item"/>
            </template>
            <template v-else>
              <span class="float-left">
                <span v-if="slot.item" class="icon item" :class="[ icon( slot.item.type ), 'i-' + icon( slot.item.name ) ]"/>
              </span>
              <span>{{object.slots[type].item}}</span>
            </template>
          </td>
        </template>
      </tr>
      <tr class="data-info">
        <template v-for="( slot, type ) in summary.slots">
          <td>
            <skillValue :skill="slot.skill"/>
          </td>
          <td>
            <skill :skill="slot.skill"/>
            <span v-if="edits[type]" class="float-right">
              <input v-if="slot.item && slot.item.skill" type="checkbox" v-model="slot.item.skill.m"/>
            </span>
          </td>
        </template>
      </tr>
    </tbody>  
  </script>
  
  <script type="text/x-template" id="templates-team">
    <tbody>
      <tr class="data-info">
        <th>
          <span class="button remove" @click="remove( object )"/>
        </th>
        <th>
          <span class="button" :class="[ edits.name ? 'apply' : 'edit' ]" @click="edits.name = !edits.name"/>
        </th>
        <th>
          <input v-if="edits.name" v-model="object.name"/>
          <span v-else class="head">{{object.name}}</span>
        </th>
        <template v-for="( rst, sn ) in object.roster">
          <template v-if="companions[sn]">
            <td>
              <span
                class="button"
                :class="[ edits.roster[sn].hero ? 'apply' : 'edit' ]"
                @click="edits.roster[sn].hero = !edits.roster[sn].hero"/>
            </td>
            <td>
              <select2
                v-if="edits.roster[sn].hero"
                v-model="rst.name"
                :options="getHeroes( rst.name )"
                placeholder="Choose hero"/>
              <template v-else>
                <span class="float-left">
                  <span class="icon hero" :class="icon( rst.name )"/>
                </span>
                <span class="head">{{rst.name}}</span> 
              </template>
            </td>
          </template>
          <template v-else>
            <td/>
            <td/>
          </template>
        </template>
      </tr>
      <tr class="data-info">
        <th>
          <span
            class="button"
            :class="[ edits.expanded ? 'collapse' : 'expand' ]"
            @click="edits.expanded = !edits.expanded"/>
          </span>
        </th>
        <td>
          <span>{{summary.assigned}}</span>
        </td>
        <td>
          <power :power="summary.power" class="float-left"/>
        </td>
        <template v-for="( rst, sn ) in object.roster">
          <template v-if="roster[sn]">
            <td>
              <template v-if="roster[sn].origin.boostable">
                <span class="htooltip">
                  <span class="htooltip-text">{{'Set {0} boost {1}'.format( roster[sn].hero.origin, ( roster[sn].origin.b ? 'disabled' : 'enabled' ) )}}</span>
                  <input type="checkbox" v-model="roster[sn].origin.b"/>
                </span>
              </template>
            </td>
            <td>
              <power :power="roster[sn].power" class="float-left"/>
            </td>
          </template>
          <template v-else>
            <td/>
            <td/>
          </template>
        </template>
      </tr>
      <template v-if="teams.quest.choice">
        <tr class="data-info">
          <th/>
          <td>
          </td>
          </td>
          <td>
          </td>
          <td>
            <power v-if="quest.choice" :power="summary.quest.power" class="float-left"/>
          </td>
          <td>
          </td>
          <td>
            <timer v-if="quest.choice" :time="summary.quest.time.value"/>
          </td>
          <td colspan="2"/>
          <td colspan="2"/>
          <td colspan="2"/>
        </tr>
      </template>
      <template v-if="summary.skills">
        <tr v-for="k in summary.skillsRows" class="data-info">
          <th>
            <span class="head" :rowspan="summary.skillsRows">Team</span>
          </th>
          <template v-for="j in 7">
            <template v-for="skill in [ summary.skills[7*(k-1)+j-1] ]">
              <td>
                <skillValue :skill="skill" />
              </td>
              <td>
                <skill :skill="skill" />
              </td>
            </template>
          </template>
        </tr>
      </template>
      <template v-if="edits.expanded" v-for="( rst, sn ) in roster">
        <tr class="data-info">
          <th rowspan="2">
            <span class="icon medium hero" :class="icon( rst.hero.name )"/>
          </th>
          <th>
            <span>{{rst.hero.lv}}</span>
          </th>
          <th>
            <span class="head">{{rst.hero.name}}</span>
          </th>
          <template v-for="j in 6">
            <template v-for="skill in [ rst.info.hero[0+j-1] ]">
              <td>
                <skillValue :skill="skill" />
              </td>
              <td>
                <skill :skill="skill" />
              </td>
            </template>
          </template>
        </tr>
        <tr class="data-info">
          <td>
            <span
              class="button"
              :class="[ edits.roster[sn].expanded ? 'collapse' : 'expand' ]"
              @click="edits.roster[sn].expanded = !edits.roster[sn].expanded"/>
            </span>
          </td>
          <td>
            <power :power="rst.power" class="float-left"/>
          </td>
          <template v-for="j in 6">
            <template v-for="skill in [ rst.info.hero[6+j-1] ]">
              <td>
                <skillValue :skill="skill" />
              </td>
              <td>
                <skill :skill="skill" />
              </td>
            </template>
          </template>
        </tr>
        <template v-if="edits.roster[sn].expanded">
          <tr class="data-info">
            <th>
              <span
                class="button"
                :class="[ edits.roster[sn].allSlots ? 'apply' : 'edit' ]"
                @click="edits.roster[sn].allSlots = !edits.roster[sn].allSlots"/>
            </th>
            <template v-for="( slot, islot ) in rst.slots">
              <th>
                <span
                  class="button"
                  :class="[ edits.roster[sn].slots[islot] ? 'apply' : 'edit' ]"
                  @click="edits.roster[sn].slots[islot] = !edits.roster[sn].slots[islot]"/>
              </th>
              <th>
                <itemSlot
                  v-for="( itemAffinity, itemType ) in rst.hero.slots[islot].types"
                  :type="itemType"
                  :a="itemAffinity"
                  :key="itemType"/>
              </th>
            </template>
          </tr>
          <tr class="data-info">
            <th rowspan="4"/>
            <template v-for="( slot, islot ) in rst.slots">
              <td colspan="2">
                <power :power="slot.power" class="float-left"/>
                <chance :chance="slot.chance" class="float-right"/>
              </td>
            </template>
          </tr>
          <tr class="data-info">
            <template v-for="( slot, islot ) in rst.slots">
              <td class="hero-icon">
                <span class="icon break" :class="{ optimal: slot.optimal }"/>
              </td>
              <td>
                <template v-if="edits.roster[sn].slots[islot]">
                  <select2 v-model="object.roster[sn].slots[islot].q" :options="$parent.lists.quality" placeholder="Choose quality"/>
                </template>
                <template v-else>
                  <span class="float-left">
                    <span class="icon quality" :class="icon( object.roster[sn].slots[islot].q )"/>
                  </span>
                  <span>{{object.roster[sn].slots[islot].q}}</span>
                </template>
              </td>
            </template>
          </tr>
          <tr class="data-info">
            <template v-for="( slot, islot ) in rst.slots">
              <td class="hero-icon">
                <span v-if="slot.item">{{slot.item.lv}}</span>
              </td>
              <td>
                <template v-if="edits.roster[sn].slots[islot]">
                  <select2 v-model="object.roster[sn].slots[islot].item" :options="slot.list" placeholder="Choose item"/>
                </template>
                <template v-else>
                  <span class="float-left">
                    <span v-if="slot.item" class="icon item" :class="[ icon( slot.item.type ), 'i-' + icon( slot.item.name ) ]"/>
                  </span>
                  <span>{{object.roster[sn].slots[islot].item}}</span>
                </template>
              </td>
            </template>
          </tr>
          <tr class="data-info">
            <template v-for="( slot, islot ) in rst.slots">
              <td>
                <skillValue :skill="slot.skill"/>
              </td>
              <td>
                <skill :skill="slot.skill"/>
                <span v-if="edits.roster[sn].slots[islot]" class="float-right">
                  <input v-if="slot.item && slot.item.skill" type="checkbox" v-model="slot.item.skill.m"/>
                </span>
              </td>
            </template>
          </tr>
        </template>
        <template v-else>
          <tr class="data-info">
            <th/>
            <template v-for="( slot, islot ) in rst.slots">
              <td>
                <span class="icon quality" :class="icon( object.roster[sn].slots[islot].q )"/>
              </td>
              <td>
                <span class="float-left">
                  <span v-if="slot.item" class="icon item" :class="[ icon( slot.item.type ), 'i-' + icon( slot.item.name ) ]"/>
                </span>
                <span>{{object.roster[sn].slots[islot].item}}</span>
              </td>
            </template>
          </tr>
        </template>
      </template>
      <!-- Begin Heroes quest info row -->
      <!--
      <template v-if="quest.choice">
        <tr class="data-info">
          <template v-for="( sh, j ) in summary.roster">
            <td colspan="3">
              <div v-if="sh.hero.name">
                <span class="float-left">
                  <span class="icon timers resting"/>
                  <span v-if="sh.quest.rest.value >= 0">{{sh.quest.rest.value.dateString()}}</span>
                </span>
              </div>
            </td>
            <td>
              <div v-if="sh.hero.name">
                <power :power="sh.quest.power"/>
              </div>
            </td>
          </template>
        </tr>
        <tr class="data-info">
          <template v-for="( sh, j ) in summary.roster">
            <td colspan="3">
              <div v-if="sh.hero.name">
                <span class="float-left">
                  <span class="icon timers injury"/>
                  <span v-if="sh.quest.heal.value >= 0">{{sh.quest.heal.value.dateString()}}</span>
                </span>
              </div>
            </td>
            <td>
              <div v-if="sh.hero.name">
                <span class="float-left">
                  <span class="icon hero face" :class="sh.quest.face"/>
                  <span v-if="sh.quest.chance">{{sh.quest.chance.pptString(1)}}</span>
                </span>
              </div>
            </td>
          </template>
        </tr>
        <tr class="data-info">
          <template v-for="( sh, j ) in summary.roster">
            <td>
              <div v-if="sh.hero.name">
                <span class="icon artifact" :class="icon( summary.quest.item )"></span>
              </div>
            </td>
            <td colspan="2">
              <div v-if="sh.hero.name">
                <span>
                  <span>{{sh.quest.loot.min}}</span>
                  <span>&nbsp;-&nbsp;</span>
                  <span>{{sh.quest.loot.max}}</span>
                </span>
              </div>
            </td>
            <td>
              <div v-if="sh.hero.name">
                <span>{{summary.quest.item}}</span>
              </div>
            </td>
          </template>
        </tr>
      </template>
      -->
      <!-- End Heroes quest info row -->
    </tbody>
  </script>
</html>